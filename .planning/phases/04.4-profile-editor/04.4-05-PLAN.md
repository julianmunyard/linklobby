---
phase: 04.4-profile-editor
plan: 05
type: execute
wave: 2
depends_on: ["04.4-01"]
files_modified:
  - src/components/editor/social-icon-picker.tsx
  - src/components/editor/social-icons-editor.tsx
autonomous: true

must_haves:
  truths:
    - "Social icon picker shows grid of Big 5 platforms"
    - "Selecting platform prompts for URL input"
    - "Social icons can be drag-reordered"
    - "Social icons can be removed"
  artifacts:
    - path: "src/components/editor/social-icon-picker.tsx"
      provides: "Platform selection popup/dialog"
      exports: ["SocialIconPicker"]
    - path: "src/components/editor/social-icons-editor.tsx"
      provides: "Social icons list with drag-reorder"
      exports: ["SocialIconsEditor"]
  key_links:
    - from: "src/components/editor/social-icons-editor.tsx"
      to: "src/stores/profile-store.ts"
      via: "uses useProfileStore"
      pattern: "useProfileStore"
    - from: "src/components/editor/social-icons-editor.tsx"
      to: "@dnd-kit/sortable"
      via: "SortableContext with horizontalListSortingStrategy"
      pattern: "horizontalListSortingStrategy"
---

<objective>
Create social icons editing components - platform picker and sortable icons list.

Purpose: Artists can add social platform icons (Big 5: Instagram, TikTok, YouTube, Spotify, Twitter/X) to their header with drag-to-reorder capability.
Output: SocialIconPicker for adding platforms and SocialIconsEditor for managing/reordering icons.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/04.4-profile-editor/04.4-CONTEXT.md
@.planning/phases/04.4-profile-editor/04.4-RESEARCH.md
@.planning/phases/04.4-profile-editor/04.4-01-SUMMARY.md
@src/components/canvas/sortable-card-list.tsx
@src/types/profile.ts
@src/stores/profile-store.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create SocialIconPicker component</name>
  <files>src/components/editor/social-icon-picker.tsx</files>
  <action>
Create platform selection dialog for adding social icons:

1. Imports:
   - Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger from shadcn/ui
   - Input from shadcn/ui
   - Button from shadcn/ui
   - Lucide icons: Instagram, Youtube, Twitter, Music, Music2, Plus
   - SOCIAL_PLATFORMS, SocialPlatform from types/profile
   - useProfileStore

2. Define icon mapping (Lucide doesn't have all platform icons):
```typescript
const PLATFORM_ICONS: Record<SocialPlatform, React.ComponentType> = {
  instagram: Instagram,
  youtube: Youtube,
  twitter: Twitter,
  spotify: Music,    // Closest match
  tiktok: Music2,    // Closest match
}
```

3. Component state:
   - step: 'select' | 'url' (two-step flow)
   - selectedPlatform: SocialPlatform | null
   - url: string
   - open: boolean (dialog state)

4. Platform selection grid:
   - 3 or 2 column grid of platform buttons
   - Each shows icon + platform label
   - Big 5 enabled (solid/interactive)
   - Other platforms can show "Coming soon" badge (greyed out)
   - Clicking enabled platform sets selectedPlatform and moves to 'url' step

5. URL input step:
   - Show selected platform icon + name
   - Input with placeholder from SOCIAL_PLATFORMS[platform].placeholder
   - Back button to return to platform selection
   - Add button (disabled if URL empty)

6. On Add:
   - Call profileStore.addSocialIcon(platform, url)
   - Reset state and close dialog

7. Trigger:
   - Export as SocialIconPicker with children prop for trigger button
   - Default trigger: Button with Plus icon "Add Icon"

8. Simple URL validation:
   - Just check URL is not empty
   - Don't validate domain (per RESEARCH.md - platform URLs change)
   - Can add https:// prefix if missing
  </action>
  <verify>`npx tsc --noEmit` passes</verify>
  <done>SocialIconPicker shows platform grid, collects URL, adds to store</done>
</task>

<task type="auto">
  <name>Task 2: Create SocialIconsEditor component</name>
  <files>src/components/editor/social-icons-editor.tsx</files>
  <action>
Create sortable social icons list with dnd-kit:

1. Imports:
   - DndContext, closestCenter, KeyboardSensor, PointerSensor, useSensor, useSensors from @dnd-kit/core
   - SortableContext, horizontalListSortingStrategy, useSortable from @dnd-kit/sortable
   - CSS from @dnd-kit/utilities
   - useProfileStore
   - SOCIAL_PLATFORMS, PLATFORM_ICONS mapping
   - Button, X icon from lucide-react

2. SortableSocialIcon sub-component:
   - Uses useSortable hook with icon.id
   - Renders: platform icon + X button to remove
   - Drag handle: entire icon is draggable
   - Style transforms for drag preview

3. Main SocialIconsEditor component:
   - Get socialIcons from useProfileStore
   - Hydration guard (same pattern as sortable-card-list)
   - Sensors: PointerSensor with 4px distance, KeyboardSensor

4. DndContext setup:
```tsx
<DndContext
  sensors={sensors}
  collisionDetection={closestCenter}
  onDragEnd={handleDragEnd}
>
  <SortableContext
    items={socialIcons.map(i => i.id)}
    strategy={horizontalListSortingStrategy}
  >
    <div className="flex gap-2 flex-wrap">
      {socialIcons.map(icon => (
        <SortableSocialIcon key={icon.id} icon={icon} />
      ))}
    </div>
  </SortableContext>
</DndContext>
```

5. handleDragEnd:
   - Find oldIndex and newIndex
   - Call profileStore.reorderSocialIcons(oldIndex, newIndex)

6. Remove handler:
   - X button calls profileStore.removeSocialIcon(id)

7. Empty state:
   - When no icons: show subtle "No social icons added" text

8. Styling:
   - Icons display as row with gap-2
   - Each icon: rounded button/badge with platform icon
   - Hover state shows X button
   - Dragging state: slight scale and shadow
  </action>
  <verify>`npx tsc --noEmit` passes, drag-reorder works</verify>
  <done>SocialIconsEditor renders icons, supports drag-reorder, remove works</done>
</task>

</tasks>

<verification>
- `npm run build` passes
- SocialIconPicker opens dialog, shows platform grid
- Selecting platform shows URL input
- Adding icon appears in SocialIconsEditor
- Icons can be dragged to reorder
- X button removes icon
</verification>

<success_criteria>
- Big 5 platforms selectable in picker
- URL collected after platform selection
- Social icons render in horizontal row
- Drag-to-reorder works with visual feedback
- Remove button deletes icon from store
</success_criteria>

<output>
After completion, create `.planning/phases/04.4-profile-editor/04.4-05-SUMMARY.md`
</output>
