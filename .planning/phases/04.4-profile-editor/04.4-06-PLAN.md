---
phase: 04.4-profile-editor
plan: 06
type: execute
wave: 3
depends_on: ["04.4-04", "04.4-05"]
files_modified:
  - src/components/editor/header-section.tsx
autonomous: true

must_haves:
  truths:
    - "Social icons section appears in HeaderSection"
    - "Toggle controls social icons visibility"
    - "Add Icon button opens picker dialog"
    - "Existing icons show in sortable editor"
  artifacts:
    - path: "src/components/editor/header-section.tsx"
      provides: "Complete header section with social icons"
      contains: "SocialIconsEditor"
  key_links:
    - from: "src/components/editor/header-section.tsx"
      to: "src/components/editor/social-icons-editor.tsx"
      via: "imports SocialIconsEditor"
      pattern: "import.*SocialIconsEditor"
    - from: "src/components/editor/header-section.tsx"
      to: "src/components/editor/social-icon-picker.tsx"
      via: "imports SocialIconPicker"
      pattern: "import.*SocialIconPicker"
---

<objective>
Integrate social icons editing into HeaderSection with visibility toggle.

Purpose: Completes the profile editing UI by adding the social icons section with toggle, picker, and sortable list.
Output: HeaderSection with full social icons management capability.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/04.4-profile-editor/04.4-CONTEXT.md
@.planning/phases/04.4-profile-editor/04.4-04-SUMMARY.md
@.planning/phases/04.4-profile-editor/04.4-05-SUMMARY.md
@src/components/editor/header-section.tsx
@src/components/editor/social-icons-editor.tsx
@src/components/editor/social-icon-picker.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add social icons section to HeaderSection</name>
  <files>src/components/editor/header-section.tsx</files>
  <action>
Extend HeaderSection with social icons editing:

1. Add imports:
```typescript
import { SocialIconsEditor } from "./social-icons-editor"
import { SocialIconPicker } from "./social-icon-picker"
import { Switch } from "@/components/ui/switch"
```

2. Get social state from profile store:
```typescript
const showSocialIcons = useProfileStore((state) => state.showSocialIcons)
const setShowSocialIcons = useProfileStore((state) => state.setShowSocialIcons)
const socialIcons = useProfileStore((state) => state.socialIcons)
```

3. Add Social Icons section after Title section:
```tsx
{/* Social Icons Section */}
<div className="space-y-3">
  <div className="flex items-center justify-between">
    <Label htmlFor="show-social-icons">Show social icons in header</Label>
    <Switch
      id="show-social-icons"
      checked={showSocialIcons}
      onCheckedChange={setShowSocialIcons}
    />
  </div>

  {showSocialIcons && (
    <div className="space-y-3">
      <SocialIconsEditor />

      <SocialIconPicker>
        <Button variant="outline" size="sm" className="w-full">
          <Plus className="h-4 w-4 mr-2" />
          Add Social Icon
        </Button>
      </SocialIconPicker>
    </div>
  )}
</div>
```

4. Add Plus icon to imports from lucide-react

5. Section styling:
   - Match spacing with other sections (space-y-3 or space-y-4)
   - Toggle row: flex justify-between align-center
   - When toggle off: hide SocialIconsEditor and Add button
   - When toggle on: show icons list then Add button below

6. Helpful hint text (optional):
   - Below toggle: "Icons appear in your page header"
   - Or: "Turn off to add social icons as a card instead"

Key behavior:
- Toggle defaults to ON (showSocialIcons: true in store default)
- When off, only the toggle is visible
- When on, shows existing icons (if any) + Add button
  </action>
  <verify>`npm run dev` - HeaderSection shows social icons section with toggle</verify>
  <done>Social icons section visible with toggle, picker, and sortable editor</done>
</task>

<task type="auto">
  <name>Task 2: Polish HeaderSection layout and styling</name>
  <files>src/components/editor/header-section.tsx</files>
  <action>
Ensure consistent styling across all HeaderSection controls:

1. Section header styling:
```tsx
<div className="space-y-4">
  <h3 className="font-semibold text-sm text-muted-foreground uppercase tracking-wide">
    Header
  </h3>
  {/* ... sections ... */}
</div>
```

2. Sub-section structure (use consistently):
```tsx
<div className="space-y-2">
  <Label className="text-sm font-medium">Profile Photo</Label>
  {/* controls */}
</div>
```

3. ToggleGroup styling for Layout and Title Style:
   - Use variant="outline"
   - Full width or appropriate sizing
   - Clear active state indication

4. Dividers between major sections (optional):
   - Use Separator component between Photo, Layout, Title, Social sections
   - Or rely on spacing alone for cleaner look

5. Ensure all form controls have proper labels:
   - Profile Photo
   - Layout
   - Title Style
   - Title Size (when Text)
   - Display Name (when Text)
   - Social Icons

6. Error state handling:
   - Show error text below upload button if upload fails
   - Clear error when user retries

7. Loading states:
   - Upload button shows spinner/disabled during upload
   - Consistent loading indicators
  </action>
  <verify>Visual inspection of HeaderSection, all sections properly styled</verify>
  <done>HeaderSection has consistent styling, clear section headers, proper spacing</done>
</task>

</tasks>

<verification>
- `npm run build` passes
- HeaderSection shows all sections: Photo, Layout, Title Style, Title Size, Display Name, Social Icons
- Social icons toggle controls section visibility
- Add Social Icon button opens picker
- Icons appear in sortable editor
</verification>

<success_criteria>
- Social icons section integrated with visibility toggle
- When toggle ON: shows icons list + Add button
- When toggle OFF: hides icons list and Add button
- Consistent styling across all HeaderSection controls
- Clear labels for all form controls
</success_criteria>

<output>
After completion, create `.planning/phases/04.4-profile-editor/04.4-06-SUMMARY.md`
</output>
