---
phase: 07-theme-system
plan: 03
type: execute
wave: 2
depends_on: ["07-01", "07-02"]
files_modified:
  - src/components/editor/theme-panel.tsx
  - src/components/editor/theme-presets.tsx
  - src/components/editor/design-tab.tsx
autonomous: true

must_haves:
  truths:
    - "User can see all three themes as visual cards in Design tab"
    - "Clicking a theme card instantly applies that theme"
    - "Current theme shows selected indicator"
  artifacts:
    - path: "src/components/editor/theme-panel.tsx"
      provides: "Tabbed theme panel container"
      exports: ["ThemePanel"]
    - path: "src/components/editor/theme-presets.tsx"
      provides: "Theme selection cards with abstract swatches"
      exports: ["ThemePresets"]
    - path: "src/components/editor/design-tab.tsx"
      provides: "Design tab with ThemePanel integrated"
      contains: "ThemePanel"
  key_links:
    - from: "src/components/editor/theme-presets.tsx"
      to: "src/stores/theme-store.ts"
      via: "useThemeStore setTheme"
      pattern: "setTheme"
    - from: "src/components/editor/design-tab.tsx"
      to: "src/components/editor/theme-panel.tsx"
      via: "ThemePanel import and render"
      pattern: "ThemePanel"
---

<objective>
Create the theme selection UI with tabbed panel and visual theme cards showing abstract swatches.

Purpose: Artists need to browse and select themes visually. This creates the main interaction point for theme selection.
Output: ThemePanel with tabs, ThemePresets with clickable theme cards, integrated into DesignTab.
</objective>

<execution_context>
@/Users/julianmunyard/.claude/get-shit-done/workflows/execute-plan.md
@/Users/julianmunyard/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/07-theme-system/07-CONTEXT.md
@.planning/phases/07-theme-system/07-RESEARCH.md

# Reference from Plan 01
@src/stores/theme-store.ts
@src/lib/themes/index.ts
@src/types/theme.ts

# Existing patterns
@src/components/editor/design-tab.tsx
@src/components/editor/header-section.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ThemePresets component</name>
  <files>
    src/components/editor/theme-presets.tsx
  </files>
  <action>
Create the theme selection cards component.

Per CONTEXT.md: "Abstract swatches - Theme thumbnails show color palette + font sample, not mock pages"

```typescript
'use client'

import { useThemeStore } from '@/stores/theme-store'
import { THEMES, getThemeDefaults } from '@/lib/themes'
import { cn } from '@/lib/utils'
import { Check } from 'lucide-react'

export function ThemePresets() {
  const { themeId, setTheme } = useThemeStore()

  return (
    <div className="grid grid-cols-1 gap-3">
      {THEMES.map((theme) => {
        const isSelected = themeId === theme.id
        const defaults = getThemeDefaults(theme.id)

        return (
          <button
            key={theme.id}
            onClick={() => setTheme(theme.id)}
            className={cn(
              "relative p-4 rounded-lg border-2 text-left transition-all",
              "hover:border-accent",
              isSelected ? "border-accent bg-accent/10" : "border-border bg-card"
            )}
          >
            {/* Selected indicator */}
            {isSelected && (
              <div className="absolute top-2 right-2 w-5 h-5 rounded-full bg-accent flex items-center justify-center">
                <Check className="w-3 h-3 text-accent-foreground" />
              </div>
            )}

            {/* Theme name and description */}
            <div className="mb-3">
              <h4 className="font-medium text-sm">{theme.name}</h4>
              <p className="text-xs text-muted-foreground">{theme.description}</p>
            </div>

            {/* Abstract color swatch */}
            <div className="flex gap-1 h-8 rounded overflow-hidden">
              <div
                className="flex-1"
                style={{ backgroundColor: defaults.colors.background }}
              />
              <div
                className="flex-1"
                style={{ backgroundColor: defaults.colors.cardBg }}
              />
              <div
                className="flex-1"
                style={{ backgroundColor: defaults.colors.accent }}
              />
              <div
                className="flex-1"
                style={{ backgroundColor: defaults.colors.text }}
              />
            </div>

            {/* Font sample */}
            <div
              className="mt-2 text-xs truncate"
              style={{ fontFamily: defaults.fonts.heading }}
            >
              Aa Bb Cc 123
            </div>
          </button>
        )
      })}
    </div>
  )
}
```

Key features:
- Grid of clickable theme cards
- Each card shows: name, description, color swatch, font sample
- Selected theme has border highlight and checkmark
- Clicking instantly applies theme via setTheme
- Color swatches use actual theme default colors
  </action>
  <verify>
Run `npx tsc --noEmit`. Check component exports: `grep "export function ThemePresets" src/components/editor/theme-presets.tsx`
  </verify>
  <done>
ThemePresets component shows all three themes as visual cards with color swatches and font samples. Clicking applies theme.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create ThemePanel with tabs</name>
  <files>
    src/components/editor/theme-panel.tsx
  </files>
  <action>
Create the tabbed theme panel container.

Per CONTEXT.md: "Tabbed interface: Presets | Colors | Fonts | Style"

```typescript
'use client'

import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'
import { ThemePresets } from './theme-presets'
import { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible'
import { ChevronDown, Palette } from 'lucide-react'
import { useState } from 'react'

export function ThemePanel() {
  const [isOpen, setIsOpen] = useState(true)

  return (
    <Collapsible open={isOpen} onOpenChange={setIsOpen}>
      <CollapsibleTrigger className="flex items-center justify-between w-full py-2 text-sm font-medium">
        <div className="flex items-center gap-2">
          <Palette className="w-4 h-4" />
          <span>Theme</span>
        </div>
        <ChevronDown
          className={`w-4 h-4 transition-transform ${isOpen ? 'rotate-180' : ''}`}
        />
      </CollapsibleTrigger>
      <CollapsibleContent>
        <Tabs defaultValue="presets" className="mt-3">
          <TabsList className="w-full grid grid-cols-4 h-9">
            <TabsTrigger value="presets" className="text-xs">Presets</TabsTrigger>
            <TabsTrigger value="colors" className="text-xs">Colors</TabsTrigger>
            <TabsTrigger value="fonts" className="text-xs">Fonts</TabsTrigger>
            <TabsTrigger value="style" className="text-xs">Style</TabsTrigger>
          </TabsList>

          <TabsContent value="presets" className="mt-3">
            <ThemePresets />
          </TabsContent>

          <TabsContent value="colors" className="mt-3">
            {/* ColorCustomizer - placeholder for Plan 04 */}
            <p className="text-sm text-muted-foreground">Color customization coming soon...</p>
          </TabsContent>

          <TabsContent value="fonts" className="mt-3">
            {/* FontPicker - placeholder for Plan 05 */}
            <p className="text-sm text-muted-foreground">Font selection coming soon...</p>
          </TabsContent>

          <TabsContent value="style" className="mt-3">
            {/* StyleControls - placeholder for Plan 05 */}
            <p className="text-sm text-muted-foreground">Style controls coming soon...</p>
          </TabsContent>
        </Tabs>
      </CollapsibleContent>
    </Collapsible>
  )
}
```

Key features:
- Collapsible section (matches HeaderSection pattern)
- Four tabs: Presets, Colors, Fonts, Style
- Presets tab renders ThemePresets
- Other tabs have placeholders for Plans 04 and 05
- Compact tab triggers (text-xs) to fit all four
  </action>
  <verify>
Run `npx tsc --noEmit`. Check exports: `grep "export function ThemePanel" src/components/editor/theme-panel.tsx`
  </verify>
  <done>
ThemePanel created with four tabs. Presets tab shows ThemePresets. Other tabs have placeholders.
  </done>
</task>

<task type="auto">
  <name>Task 3: Integrate ThemePanel into DesignTab</name>
  <files>
    src/components/editor/design-tab.tsx
  </files>
  <action>
Update design-tab.tsx to include ThemePanel.

Current structure has HeaderSection. Add ThemePanel AFTER HeaderSection.

```typescript
"use client"

import { ScrollArea } from "@/components/ui/scroll-area"
import { HeaderSection } from "./header-section"
import { ThemePanel } from "./theme-panel"

export function DesignTab() {
  return (
    <ScrollArea className="h-full">
      <div className="p-4 space-y-6">
        <HeaderSection />
        <ThemePanel />
      </div>
    </ScrollArea>
  )
}
```

This places the theme panel below the profile header section in the Design tab.
  </action>
  <verify>
Run `npm run dev`. Navigate to editor. Open Design tab. Verify ThemePanel appears with tabs and theme cards are visible.
  </verify>
  <done>
ThemePanel integrated into DesignTab. Theme selection UI accessible in editor Design tab.
  </done>
</task>

</tasks>

<verification>
1. `npm run dev` runs without errors
2. Navigate to editor page
3. Open Design tab (should show Header section and Theme section)
4. Theme section has four tabs (Presets selected by default)
5. Three theme cards visible with names, descriptions, color swatches
6. Clicking a theme card changes the selected indicator
7. Theme persists across page refresh (check localStorage for 'linklobby-theme')
</verification>

<success_criteria>
- ThemePresets shows all three themes as visual cards
- Cards display color swatches and font samples
- Clicking a card applies that theme
- Selected theme has visual indicator
- ThemePanel has four tabs (Presets, Colors, Fonts, Style)
- ThemePanel integrated into DesignTab after HeaderSection
</success_criteria>

<output>
After completion, create `.planning/phases/07-theme-system/07-03-SUMMARY.md`
</output>
