---
phase: 07-theme-system
plan: 05
type: execute
wave: 3
depends_on: ["07-03", "07-04"]
files_modified:
  - src/components/editor/font-picker.tsx
  - src/components/editor/style-controls.tsx
  - src/components/editor/theme-panel.tsx
autonomous: true

must_haves:
  truths:
    - "User can select heading and body fonts from curated list"
    - "User can adjust font sizes with sliders"
    - "User can toggle shadows and adjust blur intensity"
    - "User can adjust border radius"
  artifacts:
    - path: "src/components/editor/font-picker.tsx"
      provides: "Font selection UI with preview"
      exports: ["FontPicker"]
    - path: "src/components/editor/style-controls.tsx"
      provides: "Border, shadow, and blur controls"
      exports: ["StyleControls"]
  key_links:
    - from: "src/components/editor/font-picker.tsx"
      to: "src/stores/theme-store.ts"
      via: "useThemeStore setFont"
      pattern: "setFont"
    - from: "src/components/editor/style-controls.tsx"
      to: "src/stores/theme-store.ts"
      via: "useThemeStore setStyle"
      pattern: "setStyle"
---

<objective>
Create font selection and style controls (border, shadow, blur) for complete theme customization.

Purpose: Artists need font and style control to fully customize their theme. This completes the theme customization UI.
Output: FontPicker with curated fonts, StyleControls with radius/shadow/blur, integrated into ThemePanel.
</objective>

<execution_context>
@/Users/julianmunyard/.claude/get-shit-done/workflows/execute-plan.md
@/Users/julianmunyard/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/07-theme-system/07-CONTEXT.md
@.planning/phases/07-theme-system/07-RESEARCH.md

# Reference from prior plans
@src/stores/theme-store.ts
@src/app/fonts.ts
@src/types/theme.ts

# Existing patterns
@src/components/editor/theme-panel.tsx
@src/components/ui/slider.tsx
@src/components/ui/select.tsx
@src/components/ui/switch.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create FontPicker component</name>
  <files>
    src/components/editor/font-picker.tsx
  </files>
  <action>
Create font selection UI with curated fonts and size controls.

Per CONTEXT.md:
- "Heading + body fonts - Two separate font pickers"
- "Curated font list (15-20)"
- "Separate heading/body size controls - Independent sliders"
- "Advanced font settings: bold/regular weight options"

```typescript
'use client'

import { useThemeStore } from '@/stores/theme-store'
import { CURATED_FONTS } from '@/app/fonts'
import { Label } from '@/components/ui/label'
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'
import { Slider } from '@/components/ui/slider'
import { ToggleGroup, ToggleGroupItem } from '@/components/ui/toggle-group'

export function FontPicker() {
  const { fonts, setFont } = useThemeStore()

  // Group fonts by category for better organization
  const fontsByCategory = CURATED_FONTS.reduce((acc, font) => {
    if (!acc[font.category]) acc[font.category] = []
    acc[font.category].push(font)
    return acc
  }, {} as Record<string, typeof CURATED_FONTS[number][]>)

  return (
    <div className="space-y-5">
      {/* Heading Font */}
      <div className="space-y-2">
        <Label className="text-xs font-medium text-muted-foreground">Heading Font</Label>
        <Select
          value={fonts.heading}
          onValueChange={(value) => setFont('heading', value)}
        >
          <SelectTrigger className="w-full">
            <SelectValue placeholder="Select heading font" />
          </SelectTrigger>
          <SelectContent>
            {Object.entries(fontsByCategory).map(([category, categoryFonts]) => (
              <div key={category}>
                <div className="px-2 py-1 text-xs text-muted-foreground uppercase">
                  {category}
                </div>
                {categoryFonts.map((font) => (
                  <SelectItem
                    key={font.id}
                    value={font.variable}
                    style={{ fontFamily: font.variable }}
                  >
                    {font.name}
                  </SelectItem>
                ))}
              </div>
            ))}
          </SelectContent>
        </Select>

        {/* Heading Size */}
        <div className="flex items-center gap-3">
          <Label className="text-xs min-w-[60px]">Size</Label>
          <Slider
            value={[fonts.headingSize]}
            onValueChange={([value]) => setFont('headingSize', value)}
            min={0.75}
            max={2}
            step={0.125}
            className="flex-1"
          />
          <span className="text-xs text-muted-foreground w-12 text-right">
            {(fonts.headingSize * 100).toFixed(0)}%
          </span>
        </div>

        {/* Heading Weight */}
        <div className="flex items-center gap-3">
          <Label className="text-xs min-w-[60px]">Weight</Label>
          <ToggleGroup
            type="single"
            value={fonts.headingWeight}
            onValueChange={(value) => value && setFont('headingWeight', value)}
            className="justify-start"
          >
            <ToggleGroupItem value="normal" className="text-xs h-7">
              Regular
            </ToggleGroupItem>
            <ToggleGroupItem value="bold" className="text-xs h-7 font-bold">
              Bold
            </ToggleGroupItem>
          </ToggleGroup>
        </div>
      </div>

      {/* Body Font */}
      <div className="space-y-2">
        <Label className="text-xs font-medium text-muted-foreground">Body Font</Label>
        <Select
          value={fonts.body}
          onValueChange={(value) => setFont('body', value)}
        >
          <SelectTrigger className="w-full">
            <SelectValue placeholder="Select body font" />
          </SelectTrigger>
          <SelectContent>
            {Object.entries(fontsByCategory).map(([category, categoryFonts]) => (
              <div key={category}>
                <div className="px-2 py-1 text-xs text-muted-foreground uppercase">
                  {category}
                </div>
                {categoryFonts.map((font) => (
                  <SelectItem
                    key={font.id}
                    value={font.variable}
                    style={{ fontFamily: font.variable }}
                  >
                    {font.name}
                  </SelectItem>
                ))}
              </div>
            ))}
          </SelectContent>
        </Select>

        {/* Body Size */}
        <div className="flex items-center gap-3">
          <Label className="text-xs min-w-[60px]">Size</Label>
          <Slider
            value={[fonts.bodySize]}
            onValueChange={([value]) => setFont('bodySize', value)}
            min={0.75}
            max={1.5}
            step={0.125}
            className="flex-1"
          />
          <span className="text-xs text-muted-foreground w-12 text-right">
            {(fonts.bodySize * 100).toFixed(0)}%
          </span>
        </div>
      </div>

      {/* Font Preview */}
      <div className="p-3 rounded-lg border bg-muted/30">
        <p
          className="text-lg mb-1"
          style={{
            fontFamily: fonts.heading,
            fontWeight: fonts.headingWeight === 'bold' ? 700 : 400,
            fontSize: `${fonts.headingSize}rem`,
          }}
        >
          Heading Preview
        </p>
        <p
          className="text-muted-foreground"
          style={{
            fontFamily: fonts.body,
            fontSize: `${fonts.bodySize}rem`,
          }}
        >
          Body text preview shows how your description text will appear on cards.
        </p>
      </div>
    </div>
  )
}
```

Key features:
- Two font selectors (heading, body) with category grouping
- Font items show preview in their own font
- Size sliders for both heading and body
- Weight toggle for heading (Regular/Bold)
- Live preview showing both fonts together
  </action>
  <verify>
Run `npx tsc --noEmit`. Check export: `grep "export function FontPicker" src/components/editor/font-picker.tsx`
  </verify>
  <done>
FontPicker created with heading/body font selectors, size sliders, weight toggle, and live preview.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create StyleControls component</name>
  <files>
    src/components/editor/style-controls.tsx
  </files>
  <action>
Create border, shadow, and blur controls.

Per CONTEXT.md:
- "Border controls: Radius + color (theme defines aesthetic)"
- "Shadow toggle: On/off control for card shadows"
- "Glass/blur intensity slider - User controls blur amount"

```typescript
'use client'

import { useThemeStore } from '@/stores/theme-store'
import { getTheme } from '@/lib/themes'
import { Label } from '@/components/ui/label'
import { Slider } from '@/components/ui/slider'
import { Switch } from '@/components/ui/switch'

export function StyleControls() {
  const { themeId, style, setStyle } = useThemeStore()
  const theme = getTheme(themeId)

  return (
    <div className="space-y-5">
      {/* Border Radius */}
      <div className="space-y-2">
        <div className="flex items-center justify-between">
          <Label className="text-xs font-medium text-muted-foreground">Border Radius</Label>
          <span className="text-xs text-muted-foreground">{style.borderRadius}px</span>
        </div>
        <Slider
          value={[style.borderRadius]}
          onValueChange={([value]) => setStyle('borderRadius', value)}
          min={0}
          max={32}
          step={2}
        />
        <div className="flex justify-between text-xs text-muted-foreground">
          <span>Sharp</span>
          <span>Rounded</span>
        </div>
      </div>

      {/* Shadow Toggle */}
      <div className="flex items-center justify-between">
        <div>
          <Label className="text-sm">Card Shadows</Label>
          <p className="text-xs text-muted-foreground">Add depth to cards</p>
        </div>
        <Switch
          checked={style.shadowEnabled}
          onCheckedChange={(checked) => setStyle('shadowEnabled', checked)}
        />
      </div>

      {/* Glass/Blur Intensity (only for themes that support it) */}
      {theme?.hasGlassEffect && (
        <div className="space-y-2">
          <div className="flex items-center justify-between">
            <Label className="text-xs font-medium text-muted-foreground">Glass Blur</Label>
            <span className="text-xs text-muted-foreground">{style.blurIntensity}px</span>
          </div>
          <Slider
            value={[style.blurIntensity]}
            onValueChange={([value]) => setStyle('blurIntensity', value)}
            min={0}
            max={32}
            step={2}
          />
          <div className="flex justify-between text-xs text-muted-foreground">
            <span>None</span>
            <span>Heavy</span>
          </div>
          <p className="text-xs text-muted-foreground">
            Blur effect for glass-style cards. Keep under 16px for best mobile performance.
          </p>
        </div>
      )}

      {/* Style Preview */}
      <div className="p-4 rounded-lg border bg-muted/30">
        <div
          className="w-full h-16 rounded flex items-center justify-center text-sm"
          style={{
            borderRadius: `${style.borderRadius}px`,
            backgroundColor: 'var(--theme-card-bg, hsl(var(--card)))',
            boxShadow: style.shadowEnabled ? 'var(--theme-shadow)' : 'none',
            backdropFilter: theme?.hasGlassEffect ? `blur(${style.blurIntensity}px)` : undefined,
          }}
        >
          Card Preview
        </div>
      </div>
    </div>
  )
}
```

Key features:
- Border radius slider (0-32px)
- Shadow on/off toggle
- Blur intensity slider (conditional, only for glass-supporting themes)
- Performance warning about blur
- Live style preview card
  </action>
  <verify>
Run `npx tsc --noEmit`. Check export: `grep "export function StyleControls" src/components/editor/style-controls.tsx`
  </verify>
  <done>
StyleControls created with border radius slider, shadow toggle, conditional blur slider, and preview.
  </done>
</task>

<task type="auto">
  <name>Task 3: Integrate FontPicker and StyleControls into ThemePanel</name>
  <files>
    src/components/editor/theme-panel.tsx
  </files>
  <action>
Update ThemePanel to render FontPicker in Fonts tab and StyleControls in Style tab.

```typescript
import { ThemePresets } from './theme-presets'
import { ColorCustomizer } from './color-customizer'
import { FontPicker } from './font-picker'
import { StyleControls } from './style-controls'

// In the Fonts TabsContent:
<TabsContent value="fonts" className="mt-3">
  <FontPicker />
</TabsContent>

// In the Style TabsContent:
<TabsContent value="style" className="mt-3">
  <StyleControls />
</TabsContent>
```

Complete integration with all four tabs populated.
  </action>
  <verify>
Run `npm run dev`. Navigate to editor > Design > Theme section. Verify all four tabs work: Presets, Colors, Fonts, Style.
  </verify>
  <done>
All four theme panel tabs fully implemented. FontPicker and StyleControls integrated.
  </done>
</task>

</tasks>

<verification>
1. `npm run dev` runs without errors
2. Navigate to editor > Design > Theme > Fonts tab
3. Can select heading font from curated list
4. Can select body font from curated list
5. Can adjust heading/body sizes with sliders
6. Can toggle heading weight (Regular/Bold)
7. Font preview shows selected fonts
8. Navigate to Style tab
9. Can adjust border radius with slider
10. Can toggle shadows on/off
11. For Sleek Modern theme, blur slider appears
12. Style preview shows current settings
</verification>

<success_criteria>
- FontPicker with heading and body font selectors
- Font dropdowns grouped by category (sans, serif, display)
- Size sliders for heading and body fonts
- Weight toggle for heading
- StyleControls with border radius slider
- Shadow toggle
- Conditional blur slider for glass-supporting themes
- Live preview for both fonts and styles
- All four tabs in ThemePanel fully functional
</success_criteria>

<output>
After completion, create `.planning/phases/07-theme-system/07-05-SUMMARY.md`
</output>
