---
phase: 12.71-editor-ux-overhaul
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/cards/text-card.tsx
  - src/components/cards/link-card.tsx
  - src/components/cards/horizontal-link.tsx
  - src/components/cards/hero-card.tsx
  - src/components/cards/square-card.tsx
  - src/lib/render-utils.ts
autonomous: true

must_haves:
  truths:
    - "Text card title renders line breaks from newlines"
    - "Card descriptions render line breaks from newlines"
    - "Public page shows line breaks correctly"
  artifacts:
    - path: "src/lib/render-utils.ts"
      provides: "renderWithLineBreaks utility function"
      exports: ["renderWithLineBreaks"]
    - path: "src/components/cards/text-card.tsx"
      provides: "Text card with line break rendering"
      contains: "renderWithLineBreaks"
  key_links:
    - from: "src/components/cards/text-card.tsx"
      to: "src/lib/render-utils.ts"
      via: "import renderWithLineBreaks"
      pattern: "renderWithLineBreaks"
---

<objective>
Add line break rendering for text cards and descriptions across all card types.

Purpose: Artists expect pressing Enter in a title or description to create visible line breaks on their public page. Currently newlines are swallowed by React's text rendering. This is a simple split/map fix applied consistently.

Output: All card titles and descriptions render newline characters as visible line breaks.
</objective>

<execution_context>
@/Users/julianmunyard/.claude/get-shit-done/workflows/execute-plan.md
@/Users/julianmunyard/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/12.71-editor-ux-overhaul/12.71-RESEARCH.md

Key files to reference:
@src/components/cards/text-card.tsx
@src/components/cards/link-card.tsx
@src/components/cards/horizontal-link.tsx
@src/components/cards/hero-card.tsx
@src/components/cards/square-card.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create renderWithLineBreaks utility and apply to all card types</name>
  <files>
    src/lib/render-utils.ts
    src/components/cards/text-card.tsx
    src/components/cards/link-card.tsx
    src/components/cards/horizontal-link.tsx
    src/components/cards/hero-card.tsx
    src/components/cards/square-card.tsx
  </files>
  <action>
1. Create `src/lib/render-utils.ts` with a `renderWithLineBreaks` function:
   ```typescript
   import { Fragment } from "react"

   export function renderWithLineBreaks(text: string) {
     const lines = text.split('\n')
     return lines.map((line, i) => (
       <Fragment key={i}>
         {line}
         {i < lines.length - 1 && <br />}
       </Fragment>
     ))
   }
   ```
   Use Fragment instead of span to avoid extra DOM elements.

2. In `src/components/cards/text-card.tsx`:
   - Import `renderWithLineBreaks` from `@/lib/render-utils`
   - Replace `{card.title || "Text"}` with `{renderWithLineBreaks(card.title || "Text")}`
   - Replace `{card.description}` (if rendered) with `{renderWithLineBreaks(card.description)}`

3. In `src/components/cards/link-card.tsx`:
   - Import `renderWithLineBreaks`
   - Find where `card.description` is rendered and wrap with `renderWithLineBreaks(card.description)`
   - If `card.title` is rendered directly as text, also wrap it

4. In `src/components/cards/horizontal-link.tsx`:
   - Same pattern: wrap `card.description` rendering with `renderWithLineBreaks`

5. In `src/components/cards/hero-card.tsx`:
   - Same pattern: wrap `card.description` rendering with `renderWithLineBreaks`

6. In `src/components/cards/square-card.tsx`:
   - Same pattern: wrap `card.description` rendering with `renderWithLineBreaks`

IMPORTANT: Do NOT modify the editor form fields (textarea inputs) — they already handle newlines correctly. Only modify the RENDERING side (card display components).

IMPORTANT: The public page uses the same card components, so this fix automatically applies to both editor preview and public page rendering.

NOTE: Check each card component — some may not render `card.description` at all. Only add `renderWithLineBreaks` where the text is actually displayed. Do not add it to components that don't render descriptions.
  </action>
  <verify>
    - `npm run build` passes
    - Create a text card with "Line 1\nLine 2\nLine 3" in the title — verify two line breaks render visually
    - Create a link card with a multiline description — verify line breaks render
    - Check that the editor textarea still shows proper newlines (no regression)
  </verify>
  <done>
    - renderWithLineBreaks utility exists at src/lib/render-utils.ts
    - Text card renders title with line breaks
    - All card types render description with line breaks
    - Public page displays line breaks correctly (same components)
    - No regression in editor form fields
  </done>
</task>

</tasks>

<verification>
- `npm run build` completes with 0 TypeScript errors
- Text cards show visible line breaks from \n characters
- Description fields across card types show visible line breaks
- Editor textarea still preserves newlines correctly
</verification>

<success_criteria>
- renderWithLineBreaks utility created and used in all relevant card components
- Line breaks visible in both editor preview and public page
- Build passes clean
</success_criteria>

<output>
After completion, create `.planning/phases/12.71-editor-ux-overhaul/12.71-03-SUMMARY.md`
</output>
