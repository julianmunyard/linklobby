---
phase: 12.71-editor-ux-overhaul
plan: 02
subsystem: ui
tags: [editor, dropdown, cards, react, zustand]

# Dependency graph
requires:
  - phase: 12.71-editor-ux-overhaul
    provides: click-to-navigate infrastructure from plan 01
provides:
  - Simplified card creation dropdown (9 content types, no visual variants)
  - Theme-aware "Add Link" / "Add" button label
  - "Title Edit" label replacing "Header" in Design tab and header section
  - Text Blocks section in Design panel with Add Text Block button
affects: [12.71-editor-ux-overhaul plans 03-11]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "Theme-aware UI labels using themeId from useThemeStore"
    - "Page store addCard() for direct in-memory card creation with auto-save"

key-files:
  created: []
  modified:
    - src/components/editor/cards-tab.tsx
    - src/components/editor/design-panel.tsx
    - src/components/editor/header-section.tsx
    - src/types/superpowered-web.d.ts

key-decisions:
  - "Removed mini, text, horizontal, hero, square from Add dropdown — still available via CardTypePicker in property editor"
  - "Used page store addCard() for Text Blocks button (sets hasChanges=true, auto-save persists)"
  - "Added wasmCDNUrl to SuperpoweredGlue type declaration to fix blocking TS error"

patterns-established:
  - "Content types (what it is) vs display variants (how it looks) separation in card creation UI"

# Metrics
duration: ~6min
completed: 2026-02-26
---

# Phase 12.71 Plan 02: Simplified Card Dropdown and Title Edit Labels Summary

**Card creation dropdown reduced to 9 content types (no visual variants), button renamed to 'Add Link' / 'Add' by theme, Header renamed to 'Title Edit', Text Blocks section added to Design panel**

## Performance

- **Duration:** ~6 min
- **Started:** 2026-02-26T05:28:05Z
- **Completed:** 2026-02-26T05:33:40Z
- **Tasks:** 2
- **Files modified:** 4

## Accomplishments

- Card creation dropdown simplified from 14 items to 9 content types — visual variants (mini, text, horizontal, hero, square) removed so artists see "what content" not "how it displays"
- Trigger button is now theme-aware: "Add" for mac-os/phone-home themes (which add windows/apps), "Add Link" for all other themes
- "Header" renamed to "Title Edit" in both the Design tab pill and the collapsible section heading in header-section.tsx
- Text Blocks section added to Design panel with "Add Text Block" button wired to page store's addCard('text')

## Task Commits

Each task was committed atomically:

1. **Task 1: Simplify card creation dropdown and rename button** - `26c042c` (feat)
2. **Task 2: Add Text section to Design tab and rename Header section** - `84aebda` (feat/fix — committed in prior run)

## Files Created/Modified

- `src/components/editor/cards-tab.tsx` - CARD_TYPES simplified to 9 content types, button label theme-aware
- `src/components/editor/design-panel.tsx` - TABS 'header' relabeled to 'Title Edit', Text Blocks section added with addCard hook
- `src/components/editor/header-section.tsx` - Section heading renamed from 'Header' to 'Title Edit'
- `src/types/superpowered-web.d.ts` - Added missing `wasmCDNUrl` static property to SuperpoweredGlue type

## Decisions Made

- Used `usePageStore`'s `addCard('text')` for the Text Blocks button rather than the `useCards` hook's `createCard`. The page store sets `hasChanges: true` which triggers the existing auto-save debounce — consistent with how template changes and duplicate card operations work.
- Kept all visual variants accessible through CardTypePicker in the card property editor — they aren't removed, just no longer surfaced at creation time.

## Deviations from Plan

### Auto-fixed Issues

**1. [Rule 3 - Blocking] Added missing `wasmCDNUrl` static property to SuperpoweredGlue type declaration**

- **Found during:** Task 1 build verification
- **Issue:** `SuperpoweredGlue.wasmCDNUrl = wasmUrl` in audioEngine.ts caused TS error "Property 'wasmCDNUrl' does not exist on type 'typeof SuperpoweredGlue'" — blocking TypeScript compilation
- **Fix:** Added `static wasmCDNUrl: string` to the `SuperpoweredGlue` class declaration in `src/types/superpowered-web.d.ts`
- **Files modified:** src/types/superpowered-web.d.ts
- **Verification:** TypeScript compilation passes after fix
- **Committed in:** 26c042c (part of Task 1 commit)

---

**Total deviations:** 1 auto-fixed (1 blocking)
**Impact on plan:** Required fix — TypeScript compilation was blocked. No scope creep.

## Issues Encountered

- Build still fails at static generation stage for `/auth/callback/exchange` (missing Suspense boundary for `useSearchParams`) — this is a pre-existing issue unrelated to this plan. TypeScript compilation passes cleanly.

## Next Phase Readiness

- Card creation UX simplified, ready for plan 03+
- Visual variants still accessible via property editor CardTypePicker
- Text Blocks shortcut in Design panel allows quick text card creation without navigating to Cards tab

---
*Phase: 12.71-editor-ux-overhaul*
*Completed: 2026-02-26*
