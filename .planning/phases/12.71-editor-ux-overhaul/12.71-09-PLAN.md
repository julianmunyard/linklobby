---
phase: 12.71-editor-ux-overhaul
plan: 09
type: execute
wave: 3
depends_on: ["12.71-02"]
files_modified:
  - src/components/editor/header-section.tsx
  - src/components/editor/font-picker.tsx
autonomous: true

must_haves:
  truths:
    - "Font picker controls are directly in the header/Title Edit section"
    - "User can change heading and body fonts from the Title Edit section"
    - "Font changes apply immediately to preview"
  artifacts:
    - path: "src/components/editor/header-section.tsx"
      provides: "Header section with embedded font picker controls"
      contains: "FontPicker"
  key_links:
    - from: "src/components/editor/header-section.tsx"
      to: "src/stores/theme-store.ts"
      via: "font setting update"
      pattern: "setHeadingFont|setBodyFont|fontFamily"
---

<objective>
Add font picker controls directly to the Title Edit (formerly Header) section.

Purpose: Artists shouldn't need to navigate to a separate Fonts tab to change their page fonts. Putting font controls in the Title Edit section where they're editing their header text is the natural location.

Output: Font picker embedded in Title Edit section with immediate preview updates.
</objective>

<execution_context>
@/Users/julianmunyard/.claude/get-shit-done/workflows/execute-plan.md
@/Users/julianmunyard/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/12.71-editor-ux-overhaul/12.71-RESEARCH.md
@.planning/phases/12.71-editor-ux-overhaul/12.71-02-SUMMARY.md

Key files to reference:
@src/components/editor/header-section.tsx (Title Edit section from Plan 02)
@src/components/editor/font-picker.tsx (existing font picker component)
@src/stores/theme-store.ts (font settings in theme state)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Embed font picker in Title Edit section</name>
  <files>
    src/components/editor/header-section.tsx
    src/components/editor/font-picker.tsx
  </files>
  <action>
1. First, examine `src/components/editor/font-picker.tsx` to understand:
   - What props it accepts
   - How it interacts with the theme store (likely `useThemeStore`)
   - Whether it handles both heading and body fonts or is a single selector

2. In `src/components/editor/header-section.tsx`:
   - Import the FontPicker component (or its sub-components if it's split into heading/body)
   - Add a "Fonts" subsection below the existing title/bio/avatar controls
   - Render the font picker with a label like "Page Fonts"
   - Include both heading font and body font selectors:
     a. "Heading Font" — applies to titles, display name
     b. "Body Font" — applies to descriptions, bio text
   - Use the same font picker component that's already used in the style/design controls to ensure consistency
   - If FontPicker is a standalone component that can be rendered anywhere, simply import and render it
   - If FontPicker relies on being inside a specific parent context, extract the relevant controls into a reusable sub-component first

3. Ensure font changes immediately trigger preview updates:
   - The theme store should already propagate changes to the preview via the existing sendToPreview subscription
   - Verify by checking that `useThemeStore` font setters trigger re-renders in the preview iframe

4. Add a collapsible section wrapper so the font controls don't take up too much vertical space by default:
   - Use a disclosure/accordion pattern: "Fonts" header with a chevron toggle
   - Default collapsed if the section has many controls
   - Or keep it always visible if the font picker is compact (just two dropdowns)

5. Do NOT remove the font picker from wherever else it currently lives (e.g., Style/Design tab). Having it in both places is fine — both reference the same theme store, so they stay in sync.
  </action>
  <verify>
    - `npm run build` passes
    - Navigate to Design > Title Edit section -> font picker controls visible
    - Change heading font -> preview updates immediately
    - Change body font -> preview updates immediately
    - Font picker in other locations (if any) stays in sync
  </verify>
  <done>
    - Font picker embedded in Title Edit section
    - Both heading and body font selectors present
    - Changes propagate immediately to preview
    - No regression in existing font picker locations
  </done>
</task>

</tasks>

<verification>
- `npm run build` completes with 0 TypeScript errors
- Font controls accessible from Title Edit section
- Font changes apply to preview in real-time
- Both heading and body font selectable
</verification>

<success_criteria>
- Font picker in Title Edit section works
- Real-time preview updates
- Build passes clean
</success_criteria>

<output>
After completion, create `.planning/phases/12.71-editor-ux-overhaul/12.71-09-SUMMARY.md`
</output>
