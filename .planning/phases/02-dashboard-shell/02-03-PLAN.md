---
phase: 02-dashboard-shell
plan: 03
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - src/components/editor/editor-panel.tsx
  - src/components/editor/preview-panel.tsx
  - src/components/editor/editor-layout.tsx
  - src/components/editor/preview-toggle.tsx

autonomous: true

must_haves:
  truths:
    - "Editor shows split-screen with editor on left, preview on right"
    - "Split divider can be dragged to resize panels"
    - "Editor panel has three tabs: Cards, Design, Insights"
    - "Tabs show empty state placeholders"
  artifacts:
    - path: "src/components/editor/editor-layout.tsx"
      provides: "Resizable split-screen container"
      min_lines: 20
      contains: "PanelGroup"
    - path: "src/components/editor/editor-panel.tsx"
      provides: "Left panel with tabs"
      min_lines: 40
      contains: "TabsList"
    - path: "src/components/editor/preview-panel.tsx"
      provides: "Right panel with preview area"
      min_lines: 30
  key_links:
    - from: "src/components/editor/editor-layout.tsx"
      to: "react-resizable-panels"
      via: "PanelGroup, Panel, PanelResizeHandle"
      pattern: "import.*react-resizable-panels"
    - from: "src/components/editor/editor-panel.tsx"
      to: "@/components/ui/tabs"
      via: "Tabs component import"
      pattern: "import.*tabs"
---

<objective>
Create the core split-screen editor layout with resizable panels. The editor panel contains the three tabs (Cards, Design, Insights) with empty states. The preview panel shows the live preview area.

Purpose: Establish the primary editing interface that artists will use to build their pages.
Output: Working resizable split-screen with tabbed editor and preview area.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-dashboard-shell/02-RESEARCH.md
@.planning/phases/02-dashboard-shell/02-01-SUMMARY.md

@src/components/ui/tabs.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create EditorPanel with three tabs</name>
  <files>src/components/editor/editor-panel.tsx</files>
  <action>
Create the editor panel component with Cards, Design, Insights tabs:

src/components/editor/editor-panel.tsx:
```typescript
"use client"

import { LayoutGrid, Palette, BarChart3 } from "lucide-react"
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs"
import { cn } from "@/lib/utils"

interface EmptyStateProps {
  icon: React.ElementType
  title: string
  description: string
}

function EmptyState({ icon: Icon, title, description }: EmptyStateProps) {
  return (
    <div className="flex flex-col items-center justify-center h-full min-h-[300px] text-center p-6">
      <div className="rounded-full bg-muted p-4 mb-4">
        <Icon className="h-8 w-8 text-muted-foreground" />
      </div>
      <h3 className="font-semibold text-lg mb-2">{title}</h3>
      <p className="text-muted-foreground text-sm max-w-[250px]">
        {description}
      </p>
    </div>
  )
}

export function EditorPanel() {
  return (
    <div className="h-full flex flex-col">
      <Tabs defaultValue="cards" className="flex-1 flex flex-col">
        <div className="border-b px-4">
          <TabsList className="w-full grid grid-cols-3 h-12">
            <TabsTrigger
              value="cards"
              className="flex items-center gap-2 data-[state=active]:bg-background"
            >
              <LayoutGrid className="h-4 w-4" />
              <span className="hidden sm:inline">Cards</span>
            </TabsTrigger>
            <TabsTrigger
              value="design"
              className="flex items-center gap-2 data-[state=active]:bg-background"
            >
              <Palette className="h-4 w-4" />
              <span className="hidden sm:inline">Design</span>
            </TabsTrigger>
            <TabsTrigger
              value="insights"
              className="flex items-center gap-2 data-[state=active]:bg-background"
            >
              <BarChart3 className="h-4 w-4" />
              <span className="hidden sm:inline">Insights</span>
            </TabsTrigger>
          </TabsList>
        </div>

        <div className="flex-1 overflow-auto">
          <TabsContent value="cards" className="h-full m-0 p-4">
            <EmptyState
              icon={LayoutGrid}
              title="No cards yet"
              description="Add cards to your page to create your link-in-bio. Cards coming in Phase 4."
            />
          </TabsContent>

          <TabsContent value="design" className="h-full m-0 p-4">
            <EmptyState
              icon={Palette}
              title="Design options"
              description="Customize your page's theme and colors. Design options coming in Phase 7."
            />
          </TabsContent>

          <TabsContent value="insights" className="h-full m-0 p-4">
            <EmptyState
              icon={BarChart3}
              title="Insights"
              description="Track your page views and link clicks. Analytics coming in Phase 10."
            />
          </TabsContent>
        </div>
      </Tabs>
    </div>
  )
}
```

Key patterns:
- Tabs fill available height with flex layout
- Icons visible on all screen sizes, labels hidden on mobile
- Empty states guide users to future features
- TabsContent uses h-full and overflow handling
  </action>
  <verify>
File compiles: `npx tsc --noEmit src/components/editor/editor-panel.tsx`
  </verify>
  <done>EditorPanel with Cards, Design, Insights tabs and empty states</done>
</task>

<task type="auto">
  <name>Task 2: Create PreviewPanel and PreviewToggle</name>
  <files>src/components/editor/preview-panel.tsx, src/components/editor/preview-toggle.tsx</files>
  <action>
Create the preview panel that will display the iframe preview:

src/components/editor/preview-toggle.tsx:
```typescript
"use client"

import { Smartphone, Monitor } from "lucide-react"
import { Button } from "@/components/ui/button"
import {
  Tooltip,
  TooltipContent,
  TooltipTrigger,
} from "@/components/ui/tooltip"

export type PreviewMode = "mobile" | "desktop"

interface PreviewToggleProps {
  mode: PreviewMode
  onModeChange: (mode: PreviewMode) => void
}

export function PreviewToggle({ mode, onModeChange }: PreviewToggleProps) {
  return (
    <div className="flex items-center gap-1 p-1 bg-muted rounded-lg">
      <Tooltip>
        <TooltipTrigger asChild>
          <Button
            variant={mode === "mobile" ? "secondary" : "ghost"}
            size="sm"
            className="h-8 w-8 p-0"
            onClick={() => onModeChange("mobile")}
          >
            <Smartphone className="h-4 w-4" />
            <span className="sr-only">Mobile preview</span>
          </Button>
        </TooltipTrigger>
        <TooltipContent>Mobile preview (375px)</TooltipContent>
      </Tooltip>

      <Tooltip>
        <TooltipTrigger asChild>
          <Button
            variant={mode === "desktop" ? "secondary" : "ghost"}
            size="sm"
            className="h-8 w-8 p-0"
            onClick={() => onModeChange("desktop")}
          >
            <Monitor className="h-4 w-4" />
            <span className="sr-only">Desktop preview</span>
          </Button>
        </TooltipTrigger>
        <TooltipContent>Desktop preview (full width)</TooltipContent>
      </Tooltip>
    </div>
  )
}
```

src/components/editor/preview-panel.tsx:
```typescript
"use client"

import { useState, useRef, useEffect } from "react"
import { PreviewToggle, type PreviewMode } from "./preview-toggle"
import { usePageStore } from "@/stores/page-store"
import { cn } from "@/lib/utils"

const PREVIEW_SIZES = {
  mobile: { width: 375, height: 667 },
  desktop: { width: "100%", height: "100%" },
} as const

export function PreviewPanel() {
  const [previewMode, setPreviewMode] = useState<PreviewMode>("desktop")
  const iframeRef = useRef<HTMLIFrameElement>(null)
  const getSnapshot = usePageStore((state) => state.getSnapshot)

  // Send state to preview iframe when it loads or state changes
  const sendToPreview = () => {
    const iframe = iframeRef.current
    if (iframe?.contentWindow) {
      const snapshot = getSnapshot()
      iframe.contentWindow.postMessage(
        { type: "STATE_UPDATE", payload: snapshot },
        window.location.origin
      )
    }
  }

  // Subscribe to store changes and send updates to preview
  useEffect(() => {
    const unsubscribe = usePageStore.subscribe(() => {
      // Debounce could be added here for performance
      sendToPreview()
    })
    return () => unsubscribe()
  }, [])

  const handleIframeLoad = () => {
    // Send initial state when iframe loads
    sendToPreview()
  }

  const size = PREVIEW_SIZES[previewMode]
  const isMobile = previewMode === "mobile"

  return (
    <div className="h-full flex flex-col bg-muted/30">
      {/* Preview toolbar */}
      <div className="flex items-center justify-between border-b px-4 py-2 bg-background">
        <span className="text-sm font-medium text-muted-foreground">
          Preview
        </span>
        <PreviewToggle mode={previewMode} onModeChange={setPreviewMode} />
      </div>

      {/* Preview area */}
      <div className="flex-1 overflow-auto p-4">
        <div
          className={cn(
            "mx-auto bg-background rounded-lg shadow-lg overflow-hidden transition-all duration-300",
            isMobile && "border-4 border-foreground/10 rounded-[2rem]"
          )}
          style={{
            width: isMobile ? size.width : "100%",
            height: isMobile ? size.height : "100%",
            maxWidth: "100%",
          }}
        >
          {/* Iframe will point to /preview route once created */}
          <div className="w-full h-full flex items-center justify-center text-muted-foreground">
            <div className="text-center p-4">
              <p className="font-medium">Live Preview</p>
              <p className="text-sm">Preview will render here</p>
            </div>
          </div>
          {/* Uncomment when /preview route is created in Plan 04:
          <iframe
            ref={iframeRef}
            src="/preview"
            className="w-full h-full border-0"
            title="Page preview"
            onLoad={handleIframeLoad}
          />
          */}
        </div>
      </div>
    </div>
  )
}
```

Key patterns:
- PreviewToggle controls mobile/desktop view
- Mobile mode shows 375x667 with rounded "device" frame
- Desktop mode fills available space
- postMessage setup ready for iframe (commented until preview route exists)
- Subscribes to Zustand store for state changes
  </action>
  <verify>
Files compile: `npx tsc --noEmit src/components/editor/preview-panel.tsx src/components/editor/preview-toggle.tsx`
  </verify>
  <done>PreviewPanel with mobile/desktop toggle and placeholder for iframe preview</done>
</task>

<task type="auto">
  <name>Task 3: Create EditorLayout with resizable panels</name>
  <files>src/components/editor/editor-layout.tsx</files>
  <action>
Create the split-screen layout using react-resizable-panels:

src/components/editor/editor-layout.tsx:
```typescript
"use client"

import { Panel, PanelGroup, PanelResizeHandle } from "react-resizable-panels"
import { EditorPanel } from "./editor-panel"
import { PreviewPanel } from "./preview-panel"
import { cn } from "@/lib/utils"

export function EditorLayout() {
  return (
    <PanelGroup
      direction="horizontal"
      className="h-full"
      autoSaveId="editor-layout"
    >
      {/* Editor panel - left side */}
      <Panel
        defaultSize={40}
        minSize={25}
        maxSize={60}
        className="bg-background"
      >
        <EditorPanel />
      </Panel>

      {/* Resize handle */}
      <PanelResizeHandle
        className={cn(
          "w-1 bg-border hover:bg-primary/50 transition-colors",
          "data-[resize-handle-active]:bg-primary",
          "relative",
          // Hit area extends beyond visible line for easier grabbing
          "before:absolute before:inset-y-0 before:-left-1 before:-right-1"
        )}
      />

      {/* Preview panel - right side */}
      <Panel
        defaultSize={60}
        minSize={40}
        className="bg-muted/20"
      >
        <PreviewPanel />
      </Panel>
    </PanelGroup>
  )
}
```

Key patterns:
- autoSaveId="editor-layout" persists panel sizes to localStorage
- Editor panel: 25-60% width, default 40%
- Preview panel: 40%+ width, default 60%
- Resize handle has extended hit area for accessibility
- Handle changes color when active/hovering
  </action>
  <verify>
File compiles: `npx tsc --noEmit src/components/editor/editor-layout.tsx`
  </verify>
  <done>EditorLayout with resizable PanelGroup, persists layout to localStorage</done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. All editor components compile without TypeScript errors
3. Components are ready to be integrated into editor page (Plan 04 will wire them)
</verification>

<success_criteria>
- EditorPanel renders with three tabs (Cards, Design, Insights)
- Each tab shows appropriate empty state with icon and description
- PreviewPanel renders with mobile/desktop toggle
- Toggle switches between mobile (375x667) and desktop (full) view
- EditorLayout creates resizable split-screen
- Panel resize persists to localStorage
</success_criteria>

<output>
After completion, create `.planning/phases/02-dashboard-shell/02-03-SUMMARY.md`
</output>
