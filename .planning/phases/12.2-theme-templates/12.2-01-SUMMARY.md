---
phase: 12.2-theme-templates
plan: 01
subsystem: ui
tags: [templates, typescript, types, registry, theme, instagram-reels]

# Dependency graph
requires: []
provides:
  - TemplateDefinition, TemplateCard, TemplateTheme, TemplateProfile types in src/lib/templates/types.ts
  - Template registry with getAllTemplates, getTemplatesByTheme, getTemplate in src/lib/templates/index.ts
  - First template: instagramReelsDarkMinimal with 5 realistic cards
  - Placeholder asset files: thumbnail.jpg (400x600), hero.jpg (800x400) in public/templates/instagram-reels-dark-minimal/
affects:
  - 12.2-02 (template picker UI consumes registry)
  - 12.2-03 (apply route reads template definitions and media assets)
  - 12.2-04 (theme-specific template expansions add to registry)

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "TemplateCard = Omit<Card, DB-fields> — strips id/page_id/timestamps for portability"
    - "TemplateTheme = Omit<ThemeState, 'pixels'> — user tracking config never copied from templates"
    - "Registry pattern: ALL_TEMPLATES array + named lookup functions (getTemplatesByTheme, getTemplate)"
    - "mediaAssets string[] — relative filenames that need upload-on-apply processing"

key-files:
  created:
    - src/lib/templates/types.ts
    - src/lib/templates/index.ts
    - src/lib/templates/data/instagram-reels/dark-minimal.ts
    - public/templates/instagram-reels-dark-minimal/thumbnail.jpg
    - public/templates/instagram-reels-dark-minimal/hero.jpg
  modified: []

key-decisions:
  - "TemplateTheme omits 'pixels' field — tracking pixel config (Facebook, GA4) is user-specific and should never be copied from templates"
  - "TemplateProfile omits avatarUrl/logoUrl — profile photos are always user-supplied, never from templates"
  - "mediaAssets[] stores relative filenames only — the apply route resolves full paths using template.id prefix"
  - "Used placehold.co for placeholder JPEGs (dark #1a1a1a) since ImageMagick not available on machine"
  - "themeId on TemplateDefinition is string (not ThemeId) to allow future themes not yet in the ThemeId union"

patterns-established:
  - "Template data files live at src/lib/templates/data/{theme-id}/{template-slug}.ts"
  - "Each template file exports one named const: export const {camelCaseName}: TemplateDefinition = {...}"
  - "Registry imports all template data files and populates ALL_TEMPLATES array"
  - "sortKey uses fractional-indexing strings: 'a0', 'a1', 'a2', 'a3', 'a4'"

# Metrics
duration: 2min
completed: 2026-02-19
---

# Phase 12.2 Plan 01: Template Type System and Infrastructure Summary

**Strongly-typed TemplateDefinition schema + template registry + instagramReelsDarkMinimal placeholder template with 5 realistic cards and valid JPEG asset files**

## Performance

- **Duration:** ~2 min
- **Started:** 2026-02-19T11:48:24Z
- **Completed:** 2026-02-19T11:50:19Z
- **Tasks:** 2
- **Files created:** 5

## Accomplishments
- Created the `TemplateDefinition`, `TemplateCard`, `TemplateTheme`, `TemplateProfile` type system that all templates follow
- Built the template registry with `getAllTemplates`, `getTemplatesByTheme`, and `getTemplate` helpers
- Implemented the first real template (`instagramReelsDarkMinimal`) with 5 realistic artist cards: hero, 2x horizontal links, Spotify music embed, social-icons
- Generated valid JPEG placeholder images (thumbnail 400x600, hero 800x400) for the dark-minimal template
- Zero TypeScript errors — types correctly reference existing Card, ThemeState, Profile type system

## Task Commits

Each task was committed atomically:

1. **Task 1: Create template type definitions and seed asset files** - `f6a6d62` (feat)
2. **Task 2: Create template registry and first template** - `0bfcac9` (feat)

## Files Created/Modified
- `src/lib/templates/types.ts` - TemplateDefinition, TemplateCard, TemplateTheme, TemplateProfile types
- `src/lib/templates/index.ts` - Registry with getAllTemplates, getTemplatesByTheme, getTemplate
- `src/lib/templates/data/instagram-reels/dark-minimal.ts` - First template: ig-dark palette, 5 cards
- `public/templates/instagram-reels-dark-minimal/thumbnail.jpg` - 400x600 dark JPEG placeholder
- `public/templates/instagram-reels-dark-minimal/hero.jpg` - 800x400 dark JPEG placeholder

## Decisions Made
- **TemplateTheme omits `pixels`**: Tracking pixel config (Facebook Pixel ID, GA4 ID) is user-specific and should never be cloned from templates into another user's page.
- **TemplateProfile omits avatarUrl/logoUrl**: Profile photos are always user-supplied. Templates only suggest display settings (layout, visibility toggles, colors), never actual media.
- **themeId is `string` not `ThemeId`**: Keeps the template type system forward-compatible as new themes are added without forcing a union type update everywhere.
- **mediaAssets stores relative filenames**: The apply route (plan 03) resolves full paths by prefixing with `template.id`, keeping template definitions path-agnostic.
- **Placeholder images via placehold.co**: ImageMagick not available; curl download from placeholder service was fastest valid-JPEG approach.

## Deviations from Plan

None — plan executed exactly as written.

## Issues Encountered
- None

## User Setup Required
None - no external service configuration required.

## Next Phase Readiness
- Template type system and registry fully ready for plan 02 (template picker UI)
- `getTemplatesByTheme('instagram-reels')` returns 1 template, `getTemplatesByTheme('mac-os')` returns 0
- Asset files exist so plan 03's apply route `fs.readFileSync` won't throw
- Template data directory structure established for plan 04 to add more templates

---
*Phase: 12.2-theme-templates*
*Completed: 2026-02-19*
