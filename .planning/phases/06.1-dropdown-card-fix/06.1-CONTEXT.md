# Phase 6.1: Dropdown Card Fix - Context

**Gathered:** 2026-01-27
**Status:** Ready for planning

<domain>
## Phase Boundary

Fix all dropdown card interaction bugs discovered during Phase 6 implementation. The dropdown must:
- Toggle expand/collapse reliably on every click
- Be draggable on the main canvas to reorder among other cards
- Allow child cards to be reordered within the dropdown via drag
- Never get "stuck" or lose functionality after interactions
- Work on both desktop and mobile

**Not in scope:** Cross-container drag (moving cards into/out of dropdowns by dragging). Cards are added to dropdowns via the editor panel checkboxes.

</domain>

<decisions>
## Implementation Decisions

### Toggle behavior
- Click anywhere on dropdown header (except drag handle) to toggle expand/collapse
- Consistent both ways — click header to expand, click header to collapse
- Dropdown starts collapsed when first added
- Smooth slide animation (~200ms) for expand/collapse

### Drag handle design
- Drag handle positioned on the **right side** of the header (consistent with gallery/video cards)
- Drag handle always visible (not hover-only) — clear affordance, works for mobile
- Child cards inside expanded dropdown each have their own drag handle for reordering
- When dragging the dropdown on main canvas, **auto-collapse** if currently expanded

### Card management
- Cards are added/removed from dropdown via editor panel (checkbox list)
- No drag-into-dropdown or drag-out-of-dropdown functionality
- Reordering within dropdown uses same drag pattern as main canvas

### Claude's Discretion
- Exact animation timing and easing
- Event handling architecture (how to separate toggle click from drag)
- dnd-kit nested context structure
- State management to prevent corruption

</decisions>

<specifics>
## Specific Ideas

- "All that needs to happen is it works and doesn't fail" — reliability over features
- Drag handle position should match gallery/video cards (right side)
- Auto-collapse on drag prevents visual complexity during reorder

</specifics>

<deferred>
## Deferred Ideas

None — discussion stayed within phase scope

</deferred>

---

*Phase: 06.1-dropdown-card-fix*
*Context gathered: 2026-01-27*
