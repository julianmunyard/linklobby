# Phase 4.3: Card Context Menu & Undo/Redo - Context

**Gathered:** 2026-01-26
**Status:** Ready for planning

<domain>
## Phase Boundary

Card actions (convert type, duplicate, delete) integrated into the property editor, plus undo/redo stack for editor operations. No traditional right-click context menu — actions live in the property panel.

</domain>

<decisions>
## Implementation Decisions

### Selection & Interaction Model
- Tapping a card in the preview selects it
- Selected card shows border highlight (colored ring)
- Editor panel shows properties for the selected card
- Preview is not "live" — links don't navigate, it's purely for selection and visual feedback
- Separate "Visit Page" button to open actual live version

### Card Type Switching
- **Icon tile picker** in property editor — small thumbnails showing each card shape
- Tap a tile = instant switch (no preview step)
- Unified content schema — all card types share the same fields (title, description, url, image, button_style, etc.)
- Each card type displays/hides different fields in UI, but data structure is identical
- No data loss when switching types — all content preserved

### Conversion Rules
- Regular link cards (Hero, Horizontal, Square) can convert freely between each other
- Dropdown is a container, not a link card — cannot convert to Square/etc.
- Links inside a Dropdown can convert between link types
- Future complex cards (Gallery, Video, Game) will have their own rules

### Card Actions (Duplicate, Delete)
- Buttons in the property editor (not a dropdown menu)
- Delete is immediate — no confirmation dialog
- Delete shows toast with "Undo" button for quick recovery

### Undo/Redo
- Keyboard shortcuts: Ctrl/Cmd+Z (undo), Ctrl/Cmd+Shift+Z (redo)
- Visible toolbar buttons in addition to keyboard shortcuts (for mobile and discoverability)

### Claude's Discretion
- Undo/redo granularity (card-level vs every field edit)
- History depth (unlimited session vs fixed limit)
- Session persistence (reset on refresh vs localStorage)
- Toolbar button placement
- Toast notification strategy (when to show, when silent)
- Undo/redo button icon and disabled states

</decisions>

<specifics>
## Specific Ideas

- "You should see a card and be like, oh I want to change that one" — preview is the selection surface, editor is the property inspector
- Card type picker uses visual thumbnails so artists can "tap through to see what they like"
- Immediate delete + undo toast is the modern pattern (not confirmation dialogs)

</specifics>

<deferred>
## Deferred Ideas

None — discussion stayed within phase scope

</deferred>

---

*Phase: 04.3-card-context-menu*
*Context gathered: 2026-01-26*
